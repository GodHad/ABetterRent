<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>A Better Rent ‚Äî Founding Members</title>
<meta name="description" content="Become a Founding Member for $7.99. Quick 2-step join + consent, then secure Stripe checkout. Unlock your rocket badge and Founding Members Package. 100% of proceeds fund improvements." />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0A0A0A; --cyan:#00D4FF; --green:#2ECC71; --orange:#FF6B35;
  --glass:rgba(255,255,255,.05); --border:rgba(255,255,255,.12);
  --muted:rgba(255,255,255,.75); --muted2:rgba(255,255,255,.58);
}
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%}
body{
  font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  background:var(--bg); color:#fff; overflow-x:hidden; line-height:1.65; font-size:17px;
}

/* Background */
.background-grid{
  position:fixed; inset:0; opacity:.10; z-index:-2;
  background-image:
    linear-gradient(rgba(0,212,255,.10) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,212,255,.10) 1px, transparent 1px);
  background-size:50px 50px; animation:gridMove 20s linear infinite;
}
@keyframes gridMove{to{transform:translate(50px,50px)}}
.particles{position:fixed; inset:0; z-index:-1; pointer-events:none}
.particle{position:absolute; width:2px; height:2px; border-radius:50%;
  background:linear-gradient(45deg,var(--cyan),var(--green)); animation:float 8s ease-in-out infinite}
@keyframes float{0%,100%{transform:translateY(0) rotate(0);opacity:0}50%{transform:translateY(-80px) rotate(180deg);opacity:1}}

/* Layout */
.container{max-width:1200px;margin:0 auto;padding:0 24px}
header.header{text-align:center;padding:88px 0 108px}
.wordmark{
  font-size:clamp(3.2rem,7.2vw,6.2rem);font-weight:800;line-height:1.05;margin-bottom:16px;
  background:linear-gradient(135deg,var(--cyan),var(--green) 55%,var(--orange));
  -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;
  filter:drop-shadow(0 0 30px rgba(0,212,255,.3));
}
.tagline{
  font-size:1.6rem;font-weight:800;letter-spacing:.4px;
  background:linear-gradient(135deg,#00D4FF,#2ECC71,#FF6B35,#FFD166);
  -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;
  filter:drop-shadow(0 0 10px rgba(0,212,255,.16));
}

/* Generic glass card */
.glass-card{
  background:var(--glass); backdrop-filter:blur(20px); border:1px solid var(--border);
  border-radius:20px; padding:44px; margin-bottom:44px; position:relative; overflow:hidden;
}
.glass-card::before{
  content:""; position:absolute; left:0; right:0; top:0; height:1px;
  background:linear-gradient(90deg,transparent, rgba(0,212,255,.5), transparent);
}

/* Success banner */
.success-banner{display:none;text-align:center}
.success-banner .big{font-size:clamp(1.4rem,2.8vw,2rem);font-weight:900}

/* Step 1 / Step 2 blocks */
.signup-bubble{max-width:640px;margin:0 auto 64px;text-align:center}
.signup-title{
  font-size:1.8rem;font-weight:800;margin-bottom:10px;
  background:linear-gradient(135deg,var(--cyan),var(--green));
  -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;
}
.signup-subtitle{font-size:1.1rem;color:var(--muted);margin-bottom:18px}
.form-group{margin-bottom:16px}
.email-input{
  width:100%;padding:18px 20px;background:rgba(255,255,255,.10);
  border:1px solid rgba(255,255,255,.2);border-radius:12px;color:#fff;font-size:1.05rem;transition:.25s;
}
.email-input::placeholder{color:var(--muted2)}
.email-input:focus{outline:none;border-color:var(--cyan);box-shadow:0 0 18px rgba(0,212,255,.3)}
.checkbox-group{display:flex;align-items:center;justify-content:center;gap:12px;margin-top:14px;flex-wrap:wrap}
.checkbox{width:20px;height:20px;accent-color:var(--cyan)}
.checkbox-label{font-size:.96rem;color:var(--muted)}
.cta-row{display:flex;flex-direction:column;gap:10px}
.cta-button{
  background:linear-gradient(135deg,var(--cyan),var(--green),var(--orange));
  border:none;padding:18px 20px;border-radius:12px;color:#000;font-weight:800;font-size:1.05rem;
  cursor:pointer;transition:.25s;box-shadow:0 10px 30px rgba(0,212,255,.25);
}
.cta-button.secondary{background:rgba(255,255,255,.08);color:#fff;border:1px solid var(--border);box-shadow:none}
.cta-button:hover{transform:translateY(-2px)}
.cta-button:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}
.trust-line{margin-top:10px;font-size:.98rem;color:rgba(255,255,255,.7)}
.status-message{margin-top:10px;padding:12px;border-radius:10px;font-weight:600;font-size:1rem}
.status-error{background:rgba(255,107,53,.18);color:#FF8A62;border:1px solid rgba(255,107,53,.35)}
.status-success{background:rgba(46,204,113,.18);color:#48E2A0;border:1px solid rgba(46,204,113,.35)}
.verify-note{margin-top:8px;font-size:.92rem;color:rgba(255,255,255,.65)}

/* Rocket badge */
.badge-card{max-width:460px;margin:0 auto 44px;text-align:center;box-shadow:0 0 40px rgba(0,212,255,.18);display:none}
.badge-subtitle{font-size:1.28rem;font-weight:700;color:var(--cyan);margin-bottom:12px}
.rocket-container{margin:30px 0}
.rocket{font-size:4.2rem;display:inline-block;transition:.3s;cursor:pointer}
.rocket.rotating{animation:rocketSpin 7s linear infinite}
.rocket:hover{animation:rocketWobble .5s ease-in-out}
@keyframes rocketSpin{to{transform:rotate(360deg)}}
@keyframes rocketWobble{0%,100%{transform:rotate(0)}25%{transform:rotate(-5deg)}75%{transform:rotate(5deg)}}
.toggle-container{display:flex;align-items:center;justify-content:center;gap:14px;margin-bottom:12px}
.toggle-label{font-weight:600}
.toggle-switch{position:relative;width:68px;height:34px;border-radius:17px;background:rgba(255,255,255,.2);cursor:pointer;transition:.25s}
.toggle-switch.active{background:linear-gradient(135deg,var(--cyan),var(--green))}
.toggle-slider{position:absolute;top:4px;left:4px;width:26px;height:26px;background:#fff;border-radius:50%;transition:.25s}
.toggle-switch.active .toggle-slider{transform:translateX(34px)}
.toggle-states{display:flex;gap:8px;justify-content:center;font-size:.98rem;color:rgba(255,255,255,.6)}
.toggle-state.active{color:var(--cyan);font-weight:700}

 .glass{background:rgba(255,255,255,.05);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.1);border-radius:16px}
.card{background:rgba(255,255,255,.08);backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.15);border-radius:12px;transition:.3s ease}
.card:hover{background:rgba(255,255,255,.12);border-color:rgba(0,212,255,.3);transform:translateY(-2px)}
.neon-text{background:linear-gradient(45deg,var(--cyan),var(--green),var(--orange));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;filter:drop-shadow(0 0 20px rgba(0,212,255,.5))}
.neon-glow{box-shadow:0 0 20px rgba(0,212,255,.3),0 0 40px rgba(0,212,255,.1)}
.container{max-width:1200px;margin:0 auto;padding:0 20px;position:relative;z-index:1}

.visuals{padding:10px 0 30px}
.visual-grid{
  display:grid;
  grid-template-columns:1fr;
  gap:20px;
  align-items:stretch;
}
.visual-card{
  overflow:hidden;
  border-radius:16px;
  display:flex;
  align-items:stretch;
  justify-content:center;
}
.visual-card img{
  width:100%;
  height:100%;
  object-fit:cover;
}

/* Perks (Left) */
.perks-card{
  max-width:780px;margin:0 auto;height:100%;
  background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03));
  border:1px solid var(--border);border-radius:20px;backdrop-filter:blur(18px);
  box-shadow:0 12px 40px rgba(0,212,255,.12);font-size:18px;display:flex;flex-direction:column;

  /* FIX: anchor the ‚Äú2-Step‚Äù bubble to this card */
  position:relative;
  overflow:hidden;
}
.perks-bubble{
  position:absolute;top:14px;right:14px;display:flex;align-items:center;gap:8px;
  padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.18);
  background:radial-gradient(circle at 30% 30%, rgba(255,255,255,.18), rgba(255,255,255,.06));
  font-weight:800;font-size:.92rem;letter-spacing:.3px;color:#fff;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.06), 0 6px 18px rgba(0,212,255,.14);
}
.perks-badge-dot{width:10px;height:10px;border-radius:50%;background:linear-gradient(135deg,var(--cyan),var(--green));box-shadow:0 0 10px rgba(0,212,255,.45)}
.perks-head{padding:28px 30px 16px;border-bottom:1px solid rgba(255,255,255,.08)}
.perks-title{font-size:1.7rem;font-weight:900}
.perks-sub{color:var(--muted);font-size:1.18rem;margin-top:10px}
.perk-list{display:flex;flex-direction:column}
.perk{display:grid;grid-template-columns:68px 1fr;align-items:center;gap:20px;padding:24px 30px;border-top:1px solid rgba(255,255,255,.06)}
.perk-emoji{
  width:56px;height:56px;border-radius:14px;display:flex;align-items:center;justify-content:center;
  background:radial-gradient(circle at 30% 30%, rgba(255,255,255,.18), rgba(255,255,255,.04));
  box-shadow:0 0 18px rgba(0,212,255,.18);font-size:1.9rem;
}
.perk-text h4{margin:0 0 8px;font-size:1.32rem;line-height:1.25}
.perk-text p{margin:0;color:var(--muted);font-size:1.16rem}
.perk-boost{font-weight:900;background:linear-gradient(135deg,var(--cyan),var(--green),var(--orange));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}
.rainbow-text{background:linear-gradient(135deg,#00D4FF,#2ECC71,#FF6B35,#FFD166);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;font-weight:800}

/* === Equal-height two-column section (Perks + Badge Key) === */
.two-col{
  display:grid;
  grid-template-columns:minmax(0,1fr) minmax(0,460px);
  gap:20px;
  align-items:stretch;
  margin-bottom:72px;
}
.two-col > *{
  align-self:stretch;
  height:100%;
  display:flex; flex-direction:column;
  margin-bottom:0 !important; /* FIX: prevent glass-card margin breaking equal-height */
}

/* Badge key (Right) */
.badge-key-card{padding:20px;height:100%}
.badge-key-card .img-wrap{
  flex:1; height:100%;
  display:flex; align-items:center; justify-content:center;
  border-radius:14px; overflow:hidden; border:1px solid var(--border);
  box-shadow:0 8px 28px rgba(0,212,255,.12);
  background:radial-gradient(circle at 30% 30%, rgba(255,255,255,.06), rgba(255,255,255,.03));
  aspect-ratio: 3 / 4;
  width:100%;
}
.badge-key-card img{
  width:100%;
  height:100%;
  max-height:none;
  object-fit:cover;
  display:block;
}

/* Trust row */
.trust-row{display:grid;grid-template-columns:repeat(3,1fr);gap:26px;margin-bottom:54px}
.trust-card{background:rgba(255,255,255,.03);border:1px solid var(--border);border-radius:16px;padding:26px;text-align:center;transition:.25s;backdrop-filter:blur(12px)}
.trust-card:hover{transform:translateY(-4px);box-shadow:0 8px 24px rgba(0,212,255,.15)}
.trust-icon{font-size:2.1rem;margin-bottom:12px}
.trust-title{font-weight:700;margin-bottom:6px}
.trust-desc{font-size:1rem;color:var(--muted)}

/* How it works */
.hiw{margin-bottom:54px}
.hiw-title{
  font-size:2.2rem;font-weight:800;text-align:center;margin-bottom:26px;
  background:linear-gradient(135deg,var(--cyan),var(--green));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;
}
.hiw-steps{display:grid;grid-template-columns:repeat(3,1fr);gap:22px}
.step{
  background:rgba(255,255,255,.04);border:1px solid var(--border);border-radius:16px;padding:28px;
  transition:.25s;position:relative;overflow:hidden;backdrop-filter:blur(10px)
}
.step:hover{transform:translateY(-4px);box-shadow:0 12px 32px rgba(0,212,255,.12)}
.step-num{position:absolute;top:12px;right:14px;font-weight:800;font-size:1rem;opacity:.5}
.step-emoji{font-size:2rem;margin-bottom:12px}
.step h4{margin:0 0 8px;font-size:1.18rem}
.step p{margin:0;color:var(--muted);font-size:1.06rem}
.hiw-note{margin-top:20px;padding:16px;background:rgba(0,212,255,.12);border-left:3px solid var(--cyan);border-radius:12px;color:var(--muted);font-size:1rem}

/* Impact / Progress */
.impact-title{text-align:center;font-size:1.9rem;font-weight:800;margin-bottom:20px;position:relative;display:inline-block}
.impact-title::after{content:"";position:absolute;left:0;right:0;bottom:-6px;height:2px;background:linear-gradient(90deg,#00D4FF,#2ECC71,#FF6B35,#FFD166);border-radius:2px}
.impact-list{list-style:none;max-width:820px;margin:0 auto 28px}
.impact-item{padding:10px 0 10px 24px;position:relative;color:rgba(255,255,255,.9);font-size:1.02rem}
.impact-item::before{content:"‚Ä¢";position:absolute;left:0;color:var(--cyan);font-weight:800;font-size:1.45rem;line-height:1}
.progress-container{max-width:820px;margin:28px auto 0}
.progress-label{display:flex;justify-content:space-between;margin-bottom:10px;color:var(--muted);font-size:1rem}
.progress-bar{width:100%;height:10px;background:rgba(255,255,255,.12);border-radius:6px;overflow:hidden}
.progress-fill{height:100%;width:32%;background:linear-gradient(90deg,var(--cyan),var(--green));border-radius:6px;animation:progressGrow 1.6s ease-out}
@keyframes progressGrow{from{width:0} to{width:32%}}

/* Footer */
footer{text-align:center;padding:44px 0;border-top:1px solid var(--border);margin-top:72px}
.footer-nav{margin-bottom:16px}
.footer-nav a{color:rgba(255,255,255,.72);text-decoration:none;margin:0 16px;font-size:1rem;transition:.2s}
.footer-nav a:hover{color:var(--cyan)}
.copy{font-size:.95rem;color:rgba(255,255,255,.55)}

/* Toast */
.toast{
  position:fixed;
  top:calc(24px + env(safe-area-inset-top));
  right:calc(24px + env(safe-area-inset-right));
  background:rgba(0,0,0,.9);backdrop-filter:blur(20px);
  border:1px solid rgba(0,212,255,.3);border-radius:12px;padding:14px 18px;color:#fff;font-weight:600;
  z-index:1000;transform:translateX(360px);transition:.28s
}
.toast.show{transform:translateX(0)}

/* Confetti */
.confetti{position:fixed;width:10px;height:10px;background:var(--cyan);z-index:999;pointer-events:none}
.confetti:nth-child(odd){background:var(--green)}
.confetti:nth-child(3n){background:var(--orange)}

/* Reduced motion */
@media (prefers-reduced-motion:reduce){
  *{animation-duration:.001ms!important;animation-iteration-count:1!important;transition:none!important}
  .rocket.rotating{animation:none!important}
}

/* Responsive */
@media (max-width:1100px){ .two-col{grid-template-columns:1fr 440px} }
@media (max-width:980px){
  header.header{padding:72px 0 96px}
  .glass-card{padding:32px;margin-bottom:32px}
  .badge-card{max-width:520px}
  .perks-card{max-width:92vw}
  .two-col{grid-template-columns:1fr}
  .trust-row,.hiw-steps{grid-template-columns:1fr}
  .badge-key-card .img-wrap{aspect-ratio:auto}
  .badge-key-card img{object-fit:contain}
}
@media (max-width:480px){
  .container{padding:0 18px}
  .wordmark{font-size:3.2rem}
  .tagline{font-size:1.25rem}
  .rocket{font-size:3.2rem}
  .toggle-switch{width:60px}
  .toggle-switch.active .toggle-slider{transform:translateX(28px)}
  .perks-title{font-size:1.5rem}
  .perk-text h4{font-size:1.22rem}
  .perk-text p,.perks-sub{font-size:1.08rem}

  /* Optional: keep the bubble from overlapping tight layouts */
  .perks-bubble{top:10px;right:10px}
}
</style>
</head>

<body data-page="founders">
<!-- Background -->
<div id="particles" class="particles" aria-hidden="true"></div>
<div class="background-grid" aria-hidden="true"></div>

<!-- Header -->
<header class="header" role="banner">
  <div class="container">
    <h1 class="wordmark">A Better Rent</h1>
    <p class="tagline">‚Äì Purely Connecting‚Ñ¢</p>
  </div>
</header>

<!-- Success -->
<section id="successBanner" class="glass-card success-banner" role="status" aria-live="polite">
  <h2 class="big">üéâ Thank you for becoming a Founding Member!</h2>
</section>

<main class="container" role="main">
  <!-- Step 1 -->
  <section class="glass-card signup-bubble" id="step1" aria-labelledby="signup-title">
    <h2 id="signup-title" class="signup-title"><strong>Become a Founding Member ‚Äî $7.99</strong></h2>
    <p class="signup-subtitle"><strong><em>100% of proceeds fund platform development</em></strong></p>

    <form id="signupForm" novalidate>
      <div class="form-group">
        <label for="emailInput" class="visually-hidden" style="position:absolute;left:-9999px">Email</label>
        <input type="email" id="emailInput" class="email-input" placeholder="Enter e-mail to continue" autocomplete="email" required />
      </div>

      <div class="cta-row">
        <button type="submit" id="ctaButton" class="cta-button" data-abr-checkout>Continue to Secure Checkout ‚Üí</button>
        <p class="trust-line">üîí Secured checkout via Stripe</p>
        <div id="statusMessage" aria-live="polite" role="status" tabindex="-1"></div>
      </div>

      <div class="checkbox-group">
        <input type="checkbox" id="agreeCheckbox" class="checkbox" required />
        <label for="agreeCheckbox" class="checkbox-label">I agree to receive product updates.</label>
      </div>
    </form>
  </section>

  <!-- Step 2 -->
  <section class="glass-card signup-bubble" id="step2" style="display:none" aria-labelledby="verify-title">
    <h2 id="verify-title" class="signup-title">Step 2: Verify Your Payment</h2>
    <p class="signup-subtitle">Tap the button after you finish Stripe checkout. We‚Äôll confirm and unlock your perks.</p>

    <div class="cta-row">
      <button id="verifyButton" class="cta-button secondary" type="button">I‚Äôve completed payment</button>
      <div id="verifyMessage" aria-live="polite" role="status" tabindex="-1"></div>
      <p class="verify-note">Make sure you used the same email:<br><strong id="displayEmail">‚Äî</strong></p>
    </div>
  </section>

  <!-- Rocket badge -->
  <section class="glass-card badge-card" id="badgeCard" aria-labelledby="badge-title">
    <h3 id="badge-title" class="badge-subtitle">Your profile perk is unlocked.</h3>
    <div class="rocket-container"><span id="rocketBadge" class="rocket" role="img" aria-label="Founding Member rocket badge">üöÄ</span></div>
    <p class="verify-note" style="text-align:center">Tip: press Enter or Space to toggle your rocket.</p>
    <div class="toggle-container">
      <span class="toggle-label" id="toggleLabel">Rocket Display</span>
      <div class="toggle-switch" id="toggleSwitch" role="switch" aria-labelledby="toggleLabel" aria-checked="false" tabindex="0">
        <div class="toggle-slider"></div>
      </div>
    </div>
    <div class="toggle-states" aria-hidden="true">
      <span id="offState" class="toggle-state active">Off</span>
      <span id="onState" class="toggle-state">On</span>
    </div>
  </section>

  <!-- Two column: Perks + Badge key -->
  <section class="two-col" aria-label="Founders Package and Badge Categories">
    <!-- Left -->
    <section class="perks-card" aria-labelledby="perks-title">
      <div class="perks-bubble" aria-hidden="true"><span class="perks-badge-dot"></span> 2-Step</div>
      <div class="perks-head">
        <h3 id="perks-title" class="perks-title">üì¶ Founding Members Package</h3>
        <p class="perks-sub">One-time $7.99 unlocks a permanent status.</p>
        <p class="perks-sub">&nbsp;</p>
      </div>
      <div class="perk-list">
        <div class="perk">
          <div class="perk-emoji" aria-hidden="true">üöÄ</div>
          <div class="perk-text">
            <h4>Founders Badge</h4>
            <p>Show it off! Be among the first to collect ANY displayable badge.</p>
          </div>
        </div>
        <div class="perk">
          <div class="perk-emoji" aria-hidden="true">‚≠ê</div>
          <div class="perk-text">
            <h4><span class="perk-boost">Featured Posts</span></h4>
            <p>Your posts become featured &amp; prioritized</p>
            <p>(<span class="rainbow-text">for three months</span>).</p>
          </div>
        </div>
        <div class="perk">
          <div class="perk-emoji" aria-hidden="true">üó£Ô∏è</div>
          <div class="perk-text">
            <h4>Voice in Updates</h4>
            <p>Comment on release notes &amp; vote on polls that shape future updates.</p>
          </div>
        </div>
        <div class="perk">
          <div class="perk-emoji" aria-hidden="true">üîë</div>
          <div class="perk-text">
            <h4>Package Access</h4>
            <p>Exclusive preview of copyright-protected MVP Launch Layouts.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Right -->
    <aside class="glass-card badge-key-card" aria-labelledby="badge-key-title">
      <div class="img-wrap">
        <img src="images/badge-ctg.png" alt="Badge Categories: Trust, Connection, Contribution, Experience, Safety &amp; Care, Local Expertise" />
      </div>
    </aside>
  </section>

  <!-- Trust -->
  <section class="trust-row" aria-label="Trust features">
    <div class="trust-card"><div class="trust-icon">‚úÖ</div><h4 class="trust-title">Mutual Connections</h4><p class="trust-desc"><strong>Contact shared only when both agree.</strong></p></div>
    <div class="trust-card"><div class="trust-icon">üîí</div><h4 class="trust-title">Secure by Stripe</h4><p class="trust-desc"><strong>Safe payments + Optional ID verification.</strong></p></div>
    <div class="trust-card"><div class="trust-icon">üí°</div><h4 class="trust-title">One-time $7.99</h4><p class="trust-desc"><strong>Unlock Founding-Member Status.</strong></p></div>
  </section>

  <!-- How it works -->
  <section class="glass-card hiw" aria-labelledby="hiw-title">
    <h2 id="hiw-title" class="hiw-title">How It Works ‚Äî Purely Connecting</h2>
    <div class="hiw-steps" role="list">
      <div class="step" role="listitem">
        <span class="step-num"><strong>1</strong></span>
        <div class="step-emoji" aria-hidden="true">üì£</div>
        <h4>Share or Need</h4>
        <p>Post what you have to share‚Äîor what you‚Äôre looking for‚Äîin your local area.</p>
      </div>
      <div class="step" role="listitem">
        <span class="step-num"><strong>2</strong></span>
        <div class="step-emoji" aria-hidden="true">ü§ù</div>
        <h4>Mutual Match</h4>
        <p>We highlight trusted, nearby matches. Connections begin when both sides opt in.</p>
      </div>
      <div class="step" role="listitem">
        <span class="step-num"><strong>3</strong></span>
        <div class="step-emoji" aria-hidden="true">üéâ</div>
        <h4>Connect &amp; Enjoy</h4>
        <p>Coordinate directly. Experiences over transactions‚Äîkeep it friendly and simple.</p>
      </div>
    </div>
    <div class="hiw-note"><em>A Better Rent is a connection-based communication platform ONLY. A Better Rent LLC does not broker, own, or insure arrangements.</em></div>
  </section>

  <section class="visuals">
    <div class="container visual-grid">
      <div class="visual-card glass neon-glow">
        <img src="images/rtx.png" alt="The Sharing Shift Starts With You" loading="lazy">
      </div>
    </div>
  </section>

  <!-- Transparency & Legacy -->
  <section class="glass-card impact-section" aria-labelledby="impact-title" style="text-align:center">
    <h2 id="impact-title" class="impact-title">Transparency &amp; Legacy</h2>
    <ul class="impact-list">
      <li class="impact-item"><strong>100% of proceeds fund platform development.</strong></li>
      <li class="impact-item"><strong>Each version includes release notes showing community-funded progress.</strong></li>
      <li class="impact-item"><strong>Founding Members can say they built this with us.</strong></li>
    </ul>
    <div class="progress-container" aria-label="Progress toward version 2">
      <div class="progress-label"><span>Toward ‚Äî MVP Launch Beta v1.0</span><span aria-live="polite">32%</span></div>
      <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="32">
        <div class="progress-fill"></div>
      </div>
    </div>
  </section>
</main>

<!-- Footer -->
<footer role="contentinfo">
  <div class="container">
    <nav class="footer-nav" aria-label="Footer">
      <a href="/legal/privacy">Privacy Policy</a>
      <a href="/legal/terms">Terms</a>
      <a href="mailto:chris.karl@abetterrent.com">Contact</a>
    </nav>
    <p class="copy">¬© 2025 A Better Rent LLC ‚Äî Promotes connections, not transactions.</p>
  </div>
</footer>

<script src="https://js.stripe.com/v3"></script>
<script>
/* ---------- CONFIG ---------- */
const STRIPE_PUBLISHABLE_KEY = 'pk_test_51SelLwGR35dPPU1GCFBK0dX5DrprVcyEmQEJrBXH9fXIgZcJERTO4ybWBRxFppgG0njPU5le2TwordKn1nKIrLNT00kv7d7lVX'; // replace as needed
const stripe = Stripe(STRIPE_PUBLISHABLE_KEY);

/* Background particles */
(function(){
  const wrap=document.getElementById('particles'), COUNT=36;
  for(let i=0;i<COUNT;i++){
    const p=document.createElement('div');
    p.className='particle';
    p.style.left=(Math.random()*100)+'%';
    p.style.top =(Math.random()*100)+'%';
    p.style.animationDelay=(Math.random()*8)+'s';
    p.style.animationDuration=(Math.random()*4+6)+'s';
    wrap.appendChild(p);
  }
})();

/* Toast */
function showToast(msg,ms=3000){
  const t=document.createElement('div');
  t.className='toast'; t.textContent=msg; document.body.appendChild(t);
  setTimeout(()=>t.classList.add('show'),80);
  setTimeout(()=>{t.classList.remove('show'); setTimeout(()=>t.remove(),280);},ms);
}

/* Confetti */
function createConfetti(){
  for(let i=0;i<60;i++){
    const c=document.createElement('div');
    c.className='confetti';
    c.style.left=(Math.random()*100)+'%';
    c.style.top='-12px';
    c.style.transform=`rotate(${Math.random()*360}deg)`;
    document.body.appendChild(c);
    const anim=c.animate(
      [{transform:'translateY(0) rotate(0)',opacity:1},
       {transform:'translateY(100vh) rotate(720deg)',opacity:0}],
      {duration:Math.random()*2000+2200,easing:'cubic-bezier(.25,.46,.45,.94)'}
    );
    anim.onfinish=()=>c.remove();
  }
}

/* Helpers */
const q = (sel)=>document.querySelector(sel);
const qs = (name)=>new URL(location.href).searchParams.get(name);
const validEmail = (e)=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);

function setStatus(el, msg, kind){
  el.textContent = msg;
  el.className = msg ? ('status-message ' + (kind === 'success' ? 'status-success' : 'status-error')) : '';
  el.focus?.();
}

/* Elements */
const successBanner = q('#successBanner');
const form = q('#signupForm');
const emailInput = q('#emailInput');
const agreeCheckbox = q('#agreeCheckbox');
const ctaButton = q('#ctaButton');
const statusMessage = q('#statusMessage');
const displayEmail = q('#displayEmail');
const step1 = q('#step1');
const step2 = q('#step2');
const verifyButton = q('#verifyButton');
const verifyMessage = q('#verifyMessage');
const badgeCard = q('#badgeCard');
const toggleSwitch = q('#toggleSwitch');
const rocketBadge = q('#rocketBadge');
const offState = q('#offState');
const onState  = q('#onState');

const LS = {
  email: 'abtr_email',
  paid: 'abtr_paid',
  lastSession: 'abtr_last_session_id',
  intent: 'abtr_checkout_intent',
  confirmationSentPrefix: 'abtr_confirmation_sent_' // + sessionId
};

function showOnly(which){
  // which: "step1" | "step2" | "paid"
  if(which === 'paid'){
    successBanner.style.display='block';
    step1.style.display='none';
    step2.style.display='none';
    badgeCard.style.display='block';
    return;
  }
  successBanner.style.display='none';
  badgeCard.style.display='none';
  step1.style.display = (which === 'step1') ? 'block' : 'none';
  step2.style.display = (which === 'step2') ? 'block' : 'none';
}

function resetCheckoutState({ keepEmail=true } = {}){
  if(!keepEmail) localStorage.removeItem(LS.email);
  localStorage.removeItem(LS.intent);
  localStorage.removeItem(LS.lastSession);
  // don't clear LS.paid here; that's a ‚Äúreal‚Äù state once verified
}

/* Send confirmation (only once per session) */
async function sendConfirmationOnce(sessionId){
  if(!sessionId) return;
  const sentKey = LS.confirmationSentPrefix + sessionId;
  if(localStorage.getItem(sentKey) === '1') return;

  try{
    const res = await fetch('/api/send-confirmation',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ session_id: sessionId })
    });
    if(res.ok){
      localStorage.setItem(sentKey,'1');
    } else {
      // don‚Äôt block UX on email failure
      console.warn('send-confirmation failed', await res.text());
    }
  }catch(e){
    console.warn('send-confirmation error', e);
  }
}

function unlockFounders({ email, sessionId }){
  localStorage.setItem(LS.paid,'true');
  localStorage.removeItem(LS.intent); // IMPORTANT: stop ‚ÄúStep2 forever‚Äù
  if(email) localStorage.setItem(LS.email, email);
  if(sessionId) localStorage.setItem(LS.lastSession, sessionId);

  showOnly('paid');
  createConfetti();
  showToast('Welcome, Founding Member! üöÄ');

  // fire-and-forget
  sendConfirmationOnce(sessionId);
}

/* Verify helper used by BOTH auto-verify and the button */
async function verifySession(sessionId){
  const v = await fetch('/api/verify-session?session_id='+encodeURIComponent(sessionId), { cache:'no-store' });
  if(!v.ok) throw new Error('Verify request failed: ' + v.status);
  return await v.json(); // { paid, email, ... }
}

/* Checkout submit */
form.addEventListener('submit', async (e)=>{
  e.preventDefault();
  setStatus(statusMessage,'','error');

  const email = emailInput.value.trim();
  const consent = !!agreeCheckbox.checked;

  if(!validEmail(email)){
    setStatus(statusMessage,'That email looks off‚Äîtry again?','error');
    return;
  }
  if(!consent){
    setStatus(statusMessage,'Please agree to receive product updates.','error');
    return;
  }

  localStorage.setItem(LS.email, email);
  displayEmail && (displayEmail.textContent = email);

  ctaButton.disabled = true;
  ctaButton.textContent = 'Preparing secure checkout‚Ä¶';

  try{
    const origin = location.origin;
    const success_url = `${origin}${location.pathname}?success=true&session_id={CHECKOUT_SESSION_ID}`;
    const cancel_url  = `${origin}${location.pathname}?canceled=true`;

    const res = await fetch('/api/create-checkout-session',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ email, consent, source: 'founders_page', success_url, cancel_url })
    });

    const dataText = await res.text();
    if(!res.ok) throw new Error(dataText || 'Failed to create checkout session');

    const data = JSON.parse(dataText);
    const sessionId = data.sessionId || data.id;
    if(!sessionId) throw new Error('Missing session id from server');

    // Only mark ‚Äúintent started‚Äù AFTER we successfully got a sessionId
    localStorage.setItem(LS.intent, 'started');
    localStorage.setItem(LS.lastSession, sessionId);

    const { error } = await stripe.redirectToCheckout({ sessionId });
    if(error) throw error;

  }catch(err){
    console.error(err);
    // IMPORTANT: do not trap user in Step2 on error
    resetCheckoutState({ keepEmail:true });
    setStatus(statusMessage,'Could not start Checkout. Please try again.','error');
    ctaButton.disabled=false;
    ctaButton.textContent='Continue to Secure Checkout ‚Üí';
    showOnly('step1');
  }
});

/* Manual verify button */
verifyButton.addEventListener('click', async ()=>{
  setStatus(verifyMessage,'','error');

  const sessionId = qs('session_id') || localStorage.getItem(LS.lastSession);
  if(!sessionId){
    setStatus(verifyMessage,'I couldn‚Äôt find a checkout session to verify. Please try checkout again.','error');
    showOnly('step1');
    return;
  }

  verifyButton.disabled = true;
  verifyButton.textContent = 'Verifying‚Ä¶';

  try{
    const out = await verifySession(sessionId);
    if(out.paid){
      const finalEmail = out.email || localStorage.getItem(LS.email) || '';
      unlockFounders({ email: finalEmail || null, sessionId });
      setStatus(verifyMessage,'Payment verified ‚úÖ Perks unlocked!','success');
    }else{
      setStatus(verifyMessage,'Not verified yet. If you JUST paid, wait ~15 seconds and try again.','error');
      showOnly('step2');
    }
  }catch(err){
    console.warn(err);
    setStatus(verifyMessage,'Could not verify yet. Please try again in a moment.','error');
    showOnly('step2');
  }finally{
    verifyButton.disabled = false;
    verifyButton.textContent = 'I‚Äôve completed payment';
  }
});

/* Handle return from Stripe */
async function handleReturnFromStripe(){
  const success = qs('success');
  const sessionId = qs('session_id');
  const canceled = qs('canceled');

  if(sessionId) localStorage.setItem(LS.lastSession, sessionId);

  // If already verified previously, just show paid
  if(localStorage.getItem(LS.paid) === 'true'){
    showOnly('paid');
    return;
  }

  if(canceled){
    showToast('Checkout canceled.');
    resetCheckoutState({ keepEmail:true });
    showOnly('step1');
    if(history.replaceState){ history.replaceState({}, document.title, location.origin + location.pathname); }
    return;
  }

  if(success === 'true' && sessionId){
    // Do NOT show thank-you yet; we only show it if paid is true
    showOnly('step2');
    setStatus(verifyMessage,'Checking your payment‚Ä¶','success');

    try{
      const out = await verifySession(sessionId);
      if(out.paid){
        const finalEmail = out.email || localStorage.getItem(LS.email) || '';
        unlockFounders({ email: finalEmail || null, sessionId });
      }else{
        // keep on step2, allow manual retry
        setStatus(verifyMessage,'Payment still processing. Tap ‚ÄúI‚Äôve completed payment‚Äù in a few seconds.','error');
        showOnly('step2');
      }
    }catch(e){
      setStatus(verifyMessage,'We couldn‚Äôt auto-verify yet. Tap ‚ÄúI‚Äôve completed payment‚Äù.','error');
      showOnly('step2');
    }

    if(history.replaceState){ history.replaceState({}, document.title, location.origin + location.pathname); }
    return;
  }

  // Normal load: Step2 ONLY if we actually have a session to verify
  const hasSession = !!localStorage.getItem(LS.lastSession);
  if(hasSession){
    showOnly('step2');
  }else{
    showOnly('step1');
  }
}

/* Rocket toggle */
let rocketEnabled=false, firstToggle=true;
function updateRocketState(){
  if(rocketEnabled){
    rocketBadge.classList.add('rotating'); toggleSwitch.classList.add('active');
    toggleSwitch.setAttribute('aria-checked','true'); offState.classList.remove('active'); onState.classList.add('active');
  }else{
    rocketBadge.classList.remove('rotating'); toggleSwitch.classList.remove('active');
    toggleSwitch.setAttribute('aria-checked','false'); offState.classList.add('active'); onState.classList.remove('active');
  }
}
function handleToggle(){
  rocketEnabled=!rocketEnabled; updateRocketState();
  if(rocketEnabled){
    if(firstToggle){ createConfetti(); showToast('Rocket on! Thanks for launching with us.'); firstToggle=false; }
    else showToast('Rocket display enabled.');
  }else{
    showToast('Rocket hidden.');
  }
}
toggleSwitch.addEventListener('click', handleToggle);
toggleSwitch.addEventListener('keydown',(e)=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); handleToggle(); }});

/* Init */
(function init(){
  const saved = localStorage.getItem(LS.email);
  if(saved){
    if(emailInput) emailInput.value=saved;
    if(displayEmail) displayEmail.textContent=saved;
  }

  updateRocketState();
  handleReturnFromStripe();
})();
</script>

<!-- Mr Connect ü§ñ (mobile-safe + founders detection fixed) -->
<script>
(function(){
const CFG = {
  brand:                 "A Better Rent ‚Äî Purely Connecting‚Ñ¢",
  mission:               "A P2P shared-resources ledger of tools, spaces, skills, and time ‚Äî curated for verified, local neighbors to discover and create real-world connections and experiences.",
  priceLabel:            "$7.99 one-time",
  foundersUrl:           "https://abetterrent.com/founders",
  stripeCheckoutUrl:     "https://checkout.stripe.com/pay/your_session_or_link_here",
  emailSelector:         "#emailInput, input[type='email'], #email, [name='email']",
  checkoutBtnSelector:   "#ctaButton, #foundersCheckoutBtn, button[data-checkout], .js-checkout, [data-abr-checkout]",
  extraCheckoutHooks:    "[data-abr-cta], #stripe-checkout, #checkout",
  privacyUrl:            "/legal/privacy",
  termsUrl:              "/legal/terms",
  captureEmailOnComing:  false,
  greetDelayMs:          2200,
  rememberSeen:          true,
  storageEmailKey:       "abtr_email",
  typewriterSpeed:       22
};

const PAGE = (() => {
  const mark = (document.body && document.body.getAttribute("data-page")) || "";
  if(/founder/i.test(mark)) return "founders";
  const p = location.pathname.toLowerCase();
  if(p.includes("founder") || p.includes("founds") || p.includes("founding")) return "founders";
  if(p.includes("coming") || p==="/") return "comingsoon";
  return "generic";
})();
const isFounders = PAGE==="founders";

const $  = (sel,root=document)=>root.querySelector(sel);
const $$ = (sel,root=document)=>Array.from(root.querySelectorAll(sel));
const save = (k,v)=>localStorage.setItem(k, JSON.stringify(v));
const load = (k,d)=>{ try{ return JSON.parse(localStorage.getItem(k)) ?? d; }catch(_){ return d; } };
const isEmail = v => /^\S+@\S+\.\S+$/.test(v||"");

function carryUTM(urlStr){
  const src  = new URL(location.href);
  const dest = new URL(urlStr, location.origin);
  ["utm_source","utm_medium","utm_campaign","utm_content","utm_term","src"].forEach(k=>{
    const val = src.searchParams.get(k); if(val) dest.searchParams.set(k,val);
  });
  const preset = src.searchParams.get("email") || load(CFG.storageEmailKey, "");
  if(preset && !dest.searchParams.get("email")) dest.searchParams.set("email", preset);
  return dest.toString();
}

const CSS = `
:root{
  --abr-bg:#0B0F14; --abr-card:#131A22; --abr-border:rgba(255,255,255,.10);
  --abr-txt:#F4F8FB; --abr-sub:#A0B1C3;
}
#mcDock{
  position:fixed;right:28px;bottom:calc(28px + env(safe-area-inset-bottom));
  z-index:2147483647;display:flex;flex-direction:column;align-items:center;gap:.45rem;user-select:none
}
#mcBtn{
  width:112px;height:112px;border-radius:24px;background:#111;display:grid;place-items:center;
  cursor:pointer;border:1px solid var(--abr-border);box-shadow:0 12px 30px rgba(0,0,0,.55);
  position:relative;overflow:hidden;animation:mcBounce 2.8s ease-in-out infinite
}
#mcBtn:hover{transform:translateY(-4px)}
#mcBtn:before{
  content:"";position:absolute;inset:-4px;border-radius:26px;
  background:conic-gradient(from 0deg,#00F5FF,#FFD84A,#FF9340,#00F5FF);
  filter:blur(16px);opacity:.72;animation:mcSunrise 6s linear infinite;z-index:0
}
#mcBtn>.inner{
  position:relative;z-index:1;width:88px;height:88px;border-radius:18px;
  background:linear-gradient(180deg,#1c2430,#0f131a);display:grid;place-items:center;
  border:1px solid rgba(255,255,255,.08)
}
#mcFace{font-size:64px;line-height:1;filter:drop-shadow(0 0 8px rgba(0,245,255,.75))}
#mcHint{
  background:rgba(11,15,20,.9);color:var(--abr-txt);font-size:.85rem;padding:.35rem .7rem;border-radius:999px;
  border:1px solid rgba(0,245,255,.25);backdrop-filter:blur(10px);overflow:hidden;width:160px;text-align:center
}
#mcHint span{display:inline-block;white-space:nowrap;animation:mcMarquee 8s linear infinite}

@keyframes mcBounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
@keyframes mcSunrise{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
@keyframes mcMarquee{0%{transform:translateX(60%)}100%{transform:translateX(-100%)}}

#mcPanel{
  position:fixed;right:28px;bottom:156px;width:380px;max-width:92vw;
  max-height:min(70vh,540px);
  display:none;flex-direction:column;
  background:var(--abr-card);color:var(--abr-txt);border:1px solid var(--abr-border);
  border-radius:16px;box-shadow:0 30px 80px rgba(0,0,0,.6);overflow:hidden;
  z-index:2147483647;
}
#mcHead{
  padding:.8rem 1rem;background:radial-gradient(120% 100% at 100% 0%, rgba(0,245,255,.2), rgba(0,0,0,0)), #121921;
  display:flex;justify-content:space-between;align-items:center;gap:.5rem
}
#mcTitle{font-weight:800;font-size:1rem;display:flex;align-items:center;gap:.5rem}
#mcType{display:block;font-size:.8rem;color:#cfe7f7;height:1.2rem;white-space:nowrap;overflow:hidden;border-right:2px solid #cfe7f7}
#mcClose{background:transparent;color:var(--abr-txt);border:1px solid var(--abr-border);border-radius:8px;padding:.25rem .5rem;cursor:pointer}
#mcBody{padding:1rem;display:flex;flex-direction:column;gap:.7rem;flex:1;overflow:auto;-webkit-overflow-scrolling:touch}
.mcBtn{border:1px solid rgba(255,255,255,.18);border-radius:10px;padding:.65rem .8rem;cursor:pointer;background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));color:var(--abr-txt);font-weight:800;letter-spacing:.2px;display:flex;justify-content:space-between;align-items:center}
.mcBtn.primary{background:linear-gradient(90deg,#00F5FF,#FF5FE1,#FFD84A);color:#000;border-color:transparent}
.mcNote{font-size:.82rem;color:var(--abr-sub)}
.mcList{margin:.2rem 0 .2rem 1rem;color:var(--abr-txt);font-size:.86rem}
.mcList li{margin:.2rem 0}
#mcFooter{display:flex;justify-content:space-between;align-items:center;padding:.6rem 1rem;border-top:1px solid var(--abr-border);font-size:.75rem;color:var(--abr-sub)}
#mcFooter a{color:var(--abr-sub);text-decoration:underline}
#mcCanvas{position:fixed;inset:0;pointer-events:none;z-index:2147483646;display:none}

@media (max-width:480px){
  #mcDock{right:16px;bottom:calc(16px + env(safe-area-inset-bottom))}
  #mcPanel{right:16px;left:16px;width:auto;max-width:none;bottom:calc(140px + env(safe-area-inset-bottom));max-height:calc(100vh - 220px)}
}
`;

function trapFocus(container){
  function onKey(e){
    if(e.key!=="Tab") return;
    const focusables = container.querySelectorAll("button, [href], input, [tabindex]:not([tabindex='-1'])");
    if(!focusables.length) return;
    const first=focusables[0], last=focusables[focusables.length-1];
    if(e.shiftKey && document.activeElement===first){ last.focus(); e.preventDefault(); }
    else if(!e.shiftKey && document.activeElement===last){ first.focus(); e.preventDefault(); }
  }
  container.addEventListener("keydown",onKey);
  return ()=>container.removeEventListener("keydown",onKey);
}

function el(tag, attrs={}, html=""){ const e=document.createElement(tag); for(const [k,v] of Object.entries(attrs)) if(v!=null) e.setAttribute(k,v); if(html) e.innerHTML=html; return e; }

const memKey = "abr_mrconnect_seen_v2";
const hasSeen = ()=> localStorage.getItem(memKey)==="1";
const setSeen = ()=> localStorage.setItem(memKey,"1");

function mountUI(){
  if(document.getElementById("mcDock")) return;

  const style = el("style",{id:"mcStyles"}); style.textContent = CSS; document.head.appendChild(style);

  const dock = el("div",{id:"mcDock","aria-live":"polite"});
  const btn  = el("div",{id:"mcBtn",role:"button","aria-label":"Open Mr Connect","aria-haspopup":"dialog","aria-expanded":"false","tabindex":"0"});
  const inner= el("div",{class:"inner"}); inner.appendChild(el("div",{id:"mcFace"},"ü§ñ")); btn.appendChild(inner);
  const hint = el("div",{id:"mcHint"},`<span>Hi! I‚Äôm Mr Connect</span>`);
  dock.append(btn,hint);

  const panel = el("div",{id:"mcPanel",role:"dialog","aria-modal":"false","aria-hidden":"true","aria-label":"Mr Connect"});
  panel.innerHTML = `
    <div id="mcHead">
      <div>
        <div id="mcTitle">ü§ñ Mr Connect <small style="font-weight:600;color:#a6b8c9">‚Ä¢ Onboarding</small></div>
        <span id="mcType"></span>
      </div>
      <button id="mcClose" aria-label="Close">‚úï</button>
    </div>
    <div id="mcBody"></div>
    <div id="mcFooter">
      <span>Secure by Stripe ¬∑ ${CFG.priceLabel}</span>
      <span><a href="${CFG.privacyUrl}">Privacy</a> ¬∑ <a href="${CFG.termsUrl}">Terms</a></span>
    </div>
  `;

  const canvas = el("canvas",{id:"mcCanvas"});
  document.body.append(dock, panel, canvas);

  let releaseFocusTrap = ()=>{};
  let lastFocus = null;

  const openPanel = ()=>{
    if(panel.style.display!=="flex"){
      panel.style.display="flex"; panel.setAttribute("aria-hidden","false"); btn.setAttribute("aria-expanded","true");
      lastFocus = document.activeElement;
      releaseFocusTrap = trapFocus(panel);
      renderHome(); typewriter(); celebrate();
      if(CFG.rememberSeen) setSeen();
      const first = panel.querySelector("button, [href], input"); if(first) first.focus();
    }
  };
  const closePanel = ()=>{
    panel.style.display="none"; panel.setAttribute("aria-hidden","true"); btn.setAttribute("aria-expanded","false");
    releaseFocusTrap(); (lastFocus||btn).focus();
  };

  btn.addEventListener("click", openPanel);
  btn.addEventListener("keydown", e=>{ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); openPanel(); }});
  panel.querySelector("#mcClose").addEventListener("click", closePanel);
  document.addEventListener("keydown", e=>{ if(e.key==="Escape" && panel.style.display==="flex") closePanel(); });

  if(!hasSeen() && CFG.greetDelayMs>0){
    setTimeout(()=> {
      if(panel.style.display!=="flex"){
        hint.textContent = "Tap me for a 20-second tour ‚Üí";
        hint.style.boxShadow = "0 0 0 2px rgba(0,245,255,.35)";
      }
    }, CFG.greetDelayMs);
  }

  if(isFounders){
    const hookNative = ()=>{
      const sel = `${CFG.checkoutBtnSelector}, ${CFG.extraCheckoutHooks}`;
      $$(sel).forEach(a=> a.addEventListener("click", celebrate, {once:false}));
    };
    hookNative(); setTimeout(hookNative, 1200);
  }

  window.MrConnect = { goto: renderHome, perks: renderPerks, how: renderHow, join: handleJoin };

  function clearBody(){ $("#mcBody").innerHTML = ""; }
  function rowBtn(label, right, cls, onClick){
    const b=el("button",{class:"mcBtn"+(cls?(" "+cls):""),type:"button"}, `<span>${label}</span><span>${right||"‚Üí"}</span>`);
    b.addEventListener("click", onClick); return b;
  }

  function renderHome(){
    clearBody();
    const body = $("#mcBody");
    body.append(
      el("div",{class:"mcNote"}, `Welcome to <b>${CFG.brand}</b>. We‚Äôre a connection-based platform (no rentals/brokering).`),
      rowBtn("üöÄ Become a Founding Member", "Join", "primary", handleJoin),
      rowBtn("üéÅ What do I get?", "View", "", renderPerks),
      rowBtn("‚ÑπÔ∏è How it works (60s)", "Learn", "", renderHow),
      el("div",{class:"mcNote"}, isFounders
        ? "Fill your email + consent, then I can kick off secure checkout."
        : "Preview perks; I‚Äôll guide you to the Founders page for secure checkout.")
    );
  }

  function renderPerks(){
    clearBody();
    const body = $("#mcBody");
    body.append(
      el("div",{class:"mcNote"},"Founders get lifetime perks to kickstart the platform:"),
      el("ul",{class:"mcList"},`
        <li>üéñ <b>Founders Badge</b> ‚Äî permanent rocket badge.</li>
        <li>‚≠ê <b>Featured Posts</b> ‚Äî prioritization for 3 months at beta.</li>
        <li>üó£ <b>Voice in Updates</b> ‚Äî vote & comment on release notes.</li>
        <li>üîì <b>Early Access</b> ‚Äî preview of MVP launch layouts.</li>
      `),
      rowBtn("Back","‚Üê","",renderHome),
      rowBtn("Continue ‚Äî Become a Founder","‚Üí","primary",handleJoin)
    );
  }

  function renderHow(){
    clearBody();
    const body = $("#mcBody");
    body.append(
      el("div",{class:"mcNote"}, CFG.mission),
      el("ul",{class:"mcList"},`
        <li>1) Chip in ${CFG.priceLabel} to help launch (Stripe secure).</li>
        <li>2) You‚Äôll receive a receipt (and founders materials email).</li>
        <li>3) Your Founders Badge unlocks at beta + early previews.</li>
      `),
      rowBtn("Back","‚Üê","",renderHome),
      rowBtn("Continue ‚Äî Secure Checkout","‚Üí","primary",handleJoin)
    );
  }

  async function handleJoin(){
    celebrate();

    if(isFounders){
      // Prefill email if possible
      const emailInput = $(CFG.emailSelector);
      const fromURL = new URL(location.href).searchParams.get("email");
      const saved   = load(CFG.storageEmailKey, "");
      const candidate = fromURL || saved || "";
      if(emailInput && !emailInput.value && candidate){
        emailInput.value = candidate;
        emailInput.dispatchEvent(new Event("input",{bubbles:true}));
      }

      // Prefer clicking the real checkout button
      const checkout = $(CFG.checkoutBtnSelector) || $(CFG.extraCheckoutHooks);
      if(checkout){
        checkout.click();
        return;
      }

      // Absolute last-resort fallback (shouldn‚Äôt happen with #ctaButton present)
      location.href = carryUTM(CFG.stripeCheckoutUrl);
      return;
    }

    location.href = carryUTM(CFG.foundersUrl);
  }

  const typeLines = isFounders
    ? ["Welcome back ‚Äî ready for secure checkout?","Use the same email for verification."]
    : ["Hi neighbor! I‚Äôll get you to the right place in seconds.","Become a Founding Member to kickstart the beta."];

  function typewriter(){
    const tgt = document.getElementById("mcType"); if(!tgt) return;
    let i=0, line=0; tgt.textContent=""; tgt.style.display="block";
    const step = ()=>{
      if(line>=typeLines.length) return;
      const s = typeLines[line];
      tgt.textContent = s.slice(0,i) + ((i%2) ? " " : "");
      i++;
      if(i<=s.length){ setTimeout(step, CFG.typewriterSpeed); }
      else{ line++; i=0; setTimeout(step, 3000); }
    };
    step();
  }

  function celebrate(){
    const c = document.getElementById("mcCanvas"); if(!c) return;
    const ctx = c.getContext("2d");
    const dpr = Math.max(1, window.devicePixelRatio||1);
    c.width = innerWidth * dpr; c.height = innerHeight * dpr; c.style.display="block";
    const N = 120, parts=[];
    for(let i=0;i<N;i++){
      parts.push({
        x: Math.random()*c.width, y: -20*dpr,
        vx: (Math.random()*2-1)*3*dpr, vy: (Math.random()*2+2)*dpr,
        r: (6+Math.random()*6)*dpr, a: 1, hue: 180+Math.random()*180, spin: Math.random()*Math.PI
      });
    }
    const start = performance.now();
    (function loop(){
      ctx.clearRect(0,0,c.width,c.height);
      parts.forEach(p=>{
        p.vy += .12*dpr; p.x+=p.vx; p.y+=p.vy; p.a -= .009; p.spin+=.23;
        ctx.save(); ctx.globalAlpha = Math.max(0,p.a);
        ctx.fillStyle = `hsl(${p.hue},95%,60%)`;
        ctx.translate(p.x,p.y); ctx.rotate(p.spin);
        ctx.fillRect(-p.r/2,-p.r/2,p.r,p.r);
        ctx.restore();
      });
      if(performance.now()-start<1400){ requestAnimationFrame(loop); }
      else { c.style.display="none"; }
    })();
  }

  if(!sessionStorage.getItem("mc_seen") && CFG.greetDelayMs>0){
    setTimeout(()=>{ const b=$("#mcBtn"); if(b) b.click(); }, CFG.greetDelayMs);
    sessionStorage.setItem("mc_seen","1");
  }
}

function boot(){
  if(document.readyState==="complete"||document.readyState==="interactive") mountUI();
  else document.addEventListener("DOMContentLoaded", mountUI, {once:true});
}
boot();
})();
</script>

</body>
</html>
